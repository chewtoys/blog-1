{
  "version": 2,
  "name": "next-blog",
  "env": {
    "TOKEN": "@github-token"
  },
  "builds": [
    { "src": "next.config.js", "use": "@now/next" },
    { "src": "/server/api/**/*.ts", "use": "@now/node" }
  ],
  "routes": [
    { "src": "/api/github/issues", "dest": "server/api/github/issues.ts" },
    { "src": "/api/github/recommend", "dest": "server/api/github/recommend.ts" },
    { "src": "/api/github/labels", "dest": "server/api/github/labels.ts" },
    { "src": "/api/github/issue", "dest": "server/api/github/issue.ts" },

    { "src": "/p/(?<id>[0-9]+)$", "dest": "/post?id=$id" },
    {
      "src": "/posts/[0-9]{8}(?<id>[0-9]+)$",
      "status": 301,
      "headers": { "Location": "/p/$id" }
    }
  ]
}
