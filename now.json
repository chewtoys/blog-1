{
  "version": 2,
  "name": "blog",
  "env": {
    "TOKEN": "@github-token"
  },
  "builds": [
    { "src": "next.config.js", "use": "@now/next" },
    { "src": "/server/**/*.ts", "use": "@now/node" }
  ],
  "routes": [
    { "src": "/api/post", "dest": "server/api/post.ts" },
    { "src": "/api/posts", "dest": "server/api/posts.ts" },
    { "src": "/api/recommend", "dest": "server/api/recommend.ts" },
    { "src": "/api/labels", "dest": "server/api/labels.ts" },
    { "src": "/api/archives", "dest": "server/api/archives.ts" },

    { "src": "/sitemap.xml", "dest": "server/sitemap.ts" },

    { "src": "/post/(?<id>[0-9]+)$", "dest": "/post?id=$id" },
    {
      "src": "/posts/[0-9]{8}(?<id>[0-9]+)$",
      "status": 301,
      "headers": { "Location": "/post/$id" }
    }
  ]
}
